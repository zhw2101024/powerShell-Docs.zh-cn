---
title: 如何管理拉取请求
description: 本文介绍 PowerShell-Docs 团队如何管理拉取请求。
ms.date: 03/05/2020
ms.topic: conceptual
ms.openlocfilehash: b9b37816dfdf38e4d8b7c2d66799164d0e97d257
ms.sourcegitcommit: 18d832858a7b8ea094763afa753e0f48f01372e7
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/10/2020
ms.locfileid: "79060382"
---
# <a name="managing-pull-requests"></a>管理拉取请求

本文记录了如何管理 PowerShell-Docs 存储库中的拉取请求。 本文旨在为 PowerShell-Docs 团队成员提供帮助。 在此处发布本文，以便为公共参与者提供流程透明性。

## <a name="best-practices"></a>最佳做法

- 提交 PR 的人员不应在不进行同级评审的情况下合并 PR。
- 提交 PR 后分配同级审阅者。 早期分配可让审阅者使用编辑备注更快地做出响应。
- 使用注释来描述更改的性质或所请求的评审的类型。 请确保 @mention 审阅者。 例如，如果更改很小，并且不需要完整的技术评审，请在注释中对此进行说明。

## <a name="pr-process-steps"></a>PR 流程步骤

1. 作者：创建 PR
   - 链接 PR 解决的所有问题
   - 使用 GitHub 的 [autoclose](https://help.github.com/en/articles/closing-issues-using-keywords) 功能关闭问题
1. 作者：分配同级审阅者
1. 审阅者：校对和注释（如有必要）
1. 作者：合并评审反馈
1. 两者：评审预览渲染
1. 两者：评审验证报告 - 修复警告和错误
1. 作者：添加注销注释（包括 Acrolinx 信息）
1. 审阅者：标记评审“已批准”
1. 存储库管理员：合并 PR（请参阅下面的条件）

## <a name="content-reviewer-checklist"></a>内容审阅者清单

有关更全面的列表，请参阅[编辑清单](editorial-checklist.md)。

- 校对语法、风格、简洁性、技术准确性
- 确保示例仍适用于目标版本
- 检查预览渲染
- 检查元数据 - ms.date，删除 ms.assetid，确保必填字段
- 验证 markdown 正确性
  - 请参阅风格指南以设置特定内容的格式
- 按如下所示重新组织示例：
  - 介绍语句
  - 代码和输出
  - 代码的详细说明（如有必要）
- 检查超链接的准确性
  - 替换或删除 TechNet/MSDN 链接
  - 确保重定向到目标的最小数量
  - 确保 HTTPS
  - 更正链接类型
    - 本地文件的文件链接
    - docset 之外的文件的 URL 链接
  - 从 URL 中删除区域设置
  - 简化指向 `docs.microsoft.com` 的 URL

## <a name="branch-merge-process"></a>分支合并进程

Staging 分支是应合并到 live 分支中的唯一分支。 应压缩来自短期（工作）分支的合并。

| *合并自/到*  | *发布分支* | *staging*        | *live*      |
| ---------------- |:----------------:|:----------------:|:-----------:|
| *工作分支* | 压缩并合并 | 压缩并合并 | 不允许 |
| *发布分支* | &mdash;          | merge            | 不允许 |
| *staging*        | 变基           | &mdash;          | merge       |

### <a name="pr-merger-checklist"></a>PR 合并器清单

- 内容评审完成
- 更正更改的目标分支
- 无合并冲突
- 所有验证和生成步骤均通过
  - 应修复警告和建议（请参阅[说明](#notes)以了解异常情况）
  - 无断开的链接
- 根据表合并

### <a name="notes"></a>说明

可忽略以下警告：

```
Can't find service name for `<version>/<modulepath>/About/About.md`
```

```
Metadata with following name(s) are not allowed to be set in Yaml header, or as file level
metadata in docfx.json, or as global metadata in docfx.json: `locale`. They are generated by
Docs platform, so the values set in these 3 places will be ignored. Please remove them from all
3 places to resolve the warning.
```

合并 PR 时，将更改目标分支的标头。 基于前一标头的任何打开的 PR 现已过时。 可以使用管理员权限合并过时的 PR 以覆盖 GitHub 中的合并警告。 如果之前合并的 PR 未涉及到相同的文件，则可以放心地执行此操作。 但是，单击“更新分支”按钮是最安全的选项  。 你可能有未解决但需要修复的冲突。

## <a name="publishing-to-live"></a>发布到 Live

需要定期将 `staging` 分支中累积的更改发布到实时网站。 这需要将 `staging` 分支合并到 `live` 分支中。

- `staging` 分支应合并到 `live` 中，至少每周一次。
- 做出任何重大更改后，应将 `staging` 分支合并到 `live` 中。
  - 50 个或更多文件的更改
  - 合并发布分支后
  - 存储库或 docset 配置的更改（docfx.json、OPS 配置、生成脚本等）
  - 重定向文件的更改
  - TOC 的更改
  - 合并“项目”分支后（内容重新组织、批量更新等）
