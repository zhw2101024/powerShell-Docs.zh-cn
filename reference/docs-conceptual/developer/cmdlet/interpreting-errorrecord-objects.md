---
title: 解释 ErrorRecord 对象 |Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2a65b964-5bc6-4ade-a66b-b6afa7351ce7
caps.latest.revision: 9
ms.openlocfilehash: 32ebf2531237bfd1042310ccc4155193a58401fd
ms.sourcegitcommit: 52a67bcd9d7bf3e8600ea4302d1fa8970ff9c998
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/15/2019
ms.locfileid: "72365416"
---
# <a name="interpreting-errorrecord-objects"></a><span data-ttu-id="cb819-102">解释 ErrorRecord 对象</span><span class="sxs-lookup"><span data-stu-id="cb819-102">Interpreting ErrorRecord Objects</span></span>

<span data-ttu-id="cb819-103">在大多数情况下， [ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象表示命令或脚本生成的非终止错误。</span><span class="sxs-lookup"><span data-stu-id="cb819-103">In most cases, an [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object represents a non-terminating error generated by a command or script.</span></span> <span data-ttu-id="cb819-104">终止错误还可以通过[Icontainserrorrecord](/dotnet/api/System.Management.Automation.IContainsErrorRecord)接口在 ErrorRecord 中指定其他信息。</span><span class="sxs-lookup"><span data-stu-id="cb819-104">Terminating errors can also specify the additional information in an ErrorRecord via the [System.Management.Automation.Icontainserrorrecord](/dotnet/api/System.Management.Automation.IContainsErrorRecord) interface.</span></span>

<span data-ttu-id="cb819-105">如果要在脚本或主机中编写错误处理程序来处理命令或脚本执行过程中发生的特定错误，则必须解释[ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象，以确定它是否表示的类要处理的错误。</span><span class="sxs-lookup"><span data-stu-id="cb819-105">If you want to write an error handler in your script or a host to handle specific errors that occur during command or script execution, you must interpret the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object to determine whether it represents the class of error that you want to handle.</span></span>

<span data-ttu-id="cb819-106">当 cmdlet 遇到终止或非终止错误时，它应创建描述错误情况的错误记录。</span><span class="sxs-lookup"><span data-stu-id="cb819-106">When a cmdlet encounters a terminating or non-terminating error, it should create an error record that describes the error condition.</span></span> <span data-ttu-id="cb819-107">宿主应用程序必须调查这些错误记录，并执行任何可缓解错误的操作。</span><span class="sxs-lookup"><span data-stu-id="cb819-107">The host application must investigate these error records and perform whatever action will mitigate the error.</span></span> <span data-ttu-id="cb819-108">主机应用程序还必须调查错误记录中是否存在无法处理记录但能够继续的非终止错误，还必须调查错误记录以终止导致管道停止的错误。</span><span class="sxs-lookup"><span data-stu-id="cb819-108">The host application must also investigate error records for nonterminating errors that failed to process a record but were able to continue, and it must investigate error records for terminating errors that caused the pipeline to stop.</span></span>

> [!NOTE]
> <span data-ttu-id="cb819-109">对于终止错误，该 cmdlet 将调用[Throwterminatingerror \*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError)方法。</span><span class="sxs-lookup"><span data-stu-id="cb819-109">For terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="cb819-110">对于非终止错误，该 cmdlet 将调用[WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError)方法。</span><span class="sxs-lookup"><span data-stu-id="cb819-110">For non-terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.WriteError](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method.</span></span>

## <a name="error-record-design"></a><span data-ttu-id="cb819-111">错误记录设计</span><span class="sxs-lookup"><span data-stu-id="cb819-111">Error Record Design</span></span>

<span data-ttu-id="cb819-112">错误记录旨在提供不在异常中提供的其他错误信息，同时确保每个错误记录中的组合信息是唯一的。</span><span class="sxs-lookup"><span data-stu-id="cb819-112">Error records are designed to provide additional error information that is not available in exceptions while ensuring that the combined information in each error record is unique.</span></span> <span data-ttu-id="cb819-113">此唯一性使宿主应用程序可以检查错误记录的不同部分，以确定错误条件和宿主必须执行的操作。</span><span class="sxs-lookup"><span data-stu-id="cb819-113">This uniqueness allows the host application to inspect the different parts of the error record so that it can identify the error condition and the action the host must take.</span></span>

## <a name="interpreting-error-records"></a><span data-ttu-id="cb819-114">解释错误记录</span><span class="sxs-lookup"><span data-stu-id="cb819-114">Interpreting Error Records</span></span>

<span data-ttu-id="cb819-115">您可以查看错误记录的若干部分来确定错误。</span><span class="sxs-lookup"><span data-stu-id="cb819-115">You can review several parts of the error record to identify the error.</span></span> <span data-ttu-id="cb819-116">这些部分包括：</span><span class="sxs-lookup"><span data-stu-id="cb819-116">These parts include the following:</span></span>

- <span data-ttu-id="cb819-117">错误类别</span><span class="sxs-lookup"><span data-stu-id="cb819-117">The error category</span></span>

- <span data-ttu-id="cb819-118">错误异常</span><span class="sxs-lookup"><span data-stu-id="cb819-118">The error exception</span></span>

- <span data-ttu-id="cb819-119">完全限定的错误标识符（FQID）</span><span class="sxs-lookup"><span data-stu-id="cb819-119">The fully qualified error identifier (FQID)</span></span>

- <span data-ttu-id="cb819-120">其他信息</span><span class="sxs-lookup"><span data-stu-id="cb819-120">Other information</span></span>

### <a name="the-error-category"></a><span data-ttu-id="cb819-121">错误类别</span><span class="sxs-lookup"><span data-stu-id="cb819-121">The Error Category</span></span>

<span data-ttu-id="cb819-122">错误记录的错误类别是由[Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory)枚举提供的预定义常量之一。</span><span class="sxs-lookup"><span data-stu-id="cb819-122">The error category of the error record is one of the predefined constants provided by the [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="cb819-123">此信息可通过[ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象的[ErrorRecord. CategoryInfo](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo)属性获得。）的信息可供使用。</span><span class="sxs-lookup"><span data-stu-id="cb819-123">This information  is available through the [System.Management.Automation.ErrorRecord.CategoryInfo](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo) property of the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="cb819-124">Cmdlet 可以指定 CloseError、OpenError、InvalidType、ReadError 和 WriteError 类别以及其他错误类别。</span><span class="sxs-lookup"><span data-stu-id="cb819-124">The cmdlet can specify the CloseError, OpenError, InvalidType, ReadError, and WriteError categories, and other error categories.</span></span> <span data-ttu-id="cb819-125">主机应用程序可以使用错误类别来捕获错误组。</span><span class="sxs-lookup"><span data-stu-id="cb819-125">The host application can use the error category to capture groups of errors.</span></span>

### <a name="the-exception"></a><span data-ttu-id="cb819-126">异常</span><span class="sxs-lookup"><span data-stu-id="cb819-126">The Exception</span></span>

<span data-ttu-id="cb819-127">错误记录中包含的异常由 cmdlet 提供，并可通过[ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象的[ErrorRecord \*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception)属性进行访问，可通过此方法访问。</span><span class="sxs-lookup"><span data-stu-id="cb819-127">The exception included in the error record is provided by the cmdlet and can be accessed through the [System.Management.Automation.ErrorRecord.Exception\*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception) property of the [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="cb819-128">主机应用程序可以使用 @no__t 0 关键字来确定异常是特定类还是派生类。</span><span class="sxs-lookup"><span data-stu-id="cb819-128">Host applications can use the `is` keyword to identify that the exception is of a specific class or of a derived class.</span></span> <span data-ttu-id="cb819-129">最好在异常类型上进行分支，如下面的示例中所示。</span><span class="sxs-lookup"><span data-stu-id="cb819-129">It is better to branch on the exception type, as shown in the following example.</span></span>

`if (MyNonTerminatingError.Exception is AccessDeniedException)`

<span data-ttu-id="cb819-130">这样，你将捕获派生类。</span><span class="sxs-lookup"><span data-stu-id="cb819-130">This way, you catch the derived classes.</span></span> <span data-ttu-id="cb819-131">但是，如果反序列化异常，则会出现问题。</span><span class="sxs-lookup"><span data-stu-id="cb819-131">However, there are problems if the exception is deserialized.</span></span>

### <a name="the-fqid"></a><span data-ttu-id="cb819-132">FQID</span><span class="sxs-lookup"><span data-stu-id="cb819-132">The FQID</span></span>

<span data-ttu-id="cb819-133">FQID 是可用于标识错误的最具体的信息。</span><span class="sxs-lookup"><span data-stu-id="cb819-133">The FQID is the most specific information you can use to identify the error.</span></span> <span data-ttu-id="cb819-134">它是一个字符串，其中包含 cmdlet 定义的标识符、cmdlet 类的名称以及报告错误的源。</span><span class="sxs-lookup"><span data-stu-id="cb819-134">It is a string that includes a cmdlet-defined identifier, the name of the cmdlet class, and the source that reported the error.</span></span> <span data-ttu-id="cb819-135">通常，错误记录类似于 Windows 事件日志的事件记录。</span><span class="sxs-lookup"><span data-stu-id="cb819-135">In general, an error record is analogous to an event record of a Windows Event log.</span></span> <span data-ttu-id="cb819-136">FQID 类似于以下元组，该元组标识事件记录的类：（*日志名称*、*源*、*事件 ID*）。</span><span class="sxs-lookup"><span data-stu-id="cb819-136">The FQID is analogous to the following tuple, which identifies the class of the event record: (*log name*, *source*, *event ID*).</span></span>

<span data-ttu-id="cb819-137">FQID 设计为作为单个字符串被检查。</span><span class="sxs-lookup"><span data-stu-id="cb819-137">The FQID is designed to be inspected as a single string.</span></span> <span data-ttu-id="cb819-138">但是，在这种情况下，错误标识符旨在由主机应用程序进行分析。</span><span class="sxs-lookup"><span data-stu-id="cb819-138">However, cases exist in which the error identifier is designed to be parsed by the host application.</span></span> <span data-ttu-id="cb819-139">下面的示例是一个格式正确的完全限定的错误标识符。</span><span class="sxs-lookup"><span data-stu-id="cb819-139">The following example is a well-formed fully qualified error identifier.</span></span>

`CommandNotFoundException,Microsoft.PowerShell.Commands.GetCommandCommand.`

<span data-ttu-id="cb819-140">在上面的示例中，第一个标记是错误标识符，后跟 cmdlet 类的名称。</span><span class="sxs-lookup"><span data-stu-id="cb819-140">In the previous example, the first token is the error identifier, which is followed by the name of the cmdlet class.</span></span> <span data-ttu-id="cb819-141">错误标识符可以是单个标记，也可以是一个用句点分隔的标识符，该标识符允许在对标识符进行分支。</span><span class="sxs-lookup"><span data-stu-id="cb819-141">The error identifier can be a single token, or it can be a dot-separated identifier that allows for branching on inspection of the identifier.</span></span> <span data-ttu-id="cb819-142">不要在错误标识符中使用空格或标点。</span><span class="sxs-lookup"><span data-stu-id="cb819-142">Do not use white space or punctuation in the error identifier.</span></span> <span data-ttu-id="cb819-143">尤其重要的是，不要使用逗号;Windows PowerShell 使用逗号来分隔标识符和 cmdlet 类名称。</span><span class="sxs-lookup"><span data-stu-id="cb819-143">It is especially important not to use a comma; a comma is used by Windows PowerShell to separate the identifier and the cmdlet class name.</span></span>

### <a name="other-information"></a><span data-ttu-id="cb819-144">其他信息</span><span class="sxs-lookup"><span data-stu-id="cb819-144">Other Information</span></span>

<span data-ttu-id="cb819-145">[ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象还可能会提供描述发生错误的环境的信息。</span><span class="sxs-lookup"><span data-stu-id="cb819-145">The [System.Management.Automation.ErrorRecord](/dotnet/api/System.Management.Automation.ErrorRecord) object might also provide information that describes the environment in which the error occurred.</span></span> <span data-ttu-id="cb819-146">此信息包括错误详细信息、调用信息以及发生错误时正在处理的目标对象等项。</span><span class="sxs-lookup"><span data-stu-id="cb819-146">This information includes items such as error details, invocation information, and the target object that was being processed when the error occurred.</span></span> <span data-ttu-id="cb819-147">尽管此信息可能对主机应用程序很有用，但它通常不用于识别错误。</span><span class="sxs-lookup"><span data-stu-id="cb819-147">Although this information might be useful to the host application, it is not typically used to identify the error.</span></span> <span data-ttu-id="cb819-148">此信息通过以下属性提供：</span><span class="sxs-lookup"><span data-stu-id="cb819-148">This information is available through the following properties:</span></span>

[<span data-ttu-id="cb819-149">ErrorRecord. ErrorDetails。</span><span class="sxs-lookup"><span data-stu-id="cb819-149">System.Management.Automation.ErrorRecord.ErrorDetails</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.ErrorDetails)

[<span data-ttu-id="cb819-150">ErrorRecord. InvocationInfo。</span><span class="sxs-lookup"><span data-stu-id="cb819-150">System.Management.Automation.ErrorRecord.InvocationInfo</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.InvocationInfo)

[<span data-ttu-id="cb819-151">ErrorRecord. TargetObject。</span><span class="sxs-lookup"><span data-stu-id="cb819-151">System.Management.Automation.ErrorRecord.TargetObject</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.TargetObject)

## <a name="see-also"></a><span data-ttu-id="cb819-152">另请参阅</span><span class="sxs-lookup"><span data-stu-id="cb819-152">See Also</span></span>

[<span data-ttu-id="cb819-153">System.web. ErrorRecord</span><span class="sxs-lookup"><span data-stu-id="cb819-153">System.Management.Automation.ErrorRecord</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord)

[<span data-ttu-id="cb819-154">System.web. Errorcategory</span><span class="sxs-lookup"><span data-stu-id="cb819-154">System.Management.Automation.Errorcategory</span></span>](/dotnet/api/System.Management.Automation.ErrorCategory)

[<span data-ttu-id="cb819-155">System.web. Errorcategoryinfo</span><span class="sxs-lookup"><span data-stu-id="cb819-155">System.Management.Automation.Errorcategoryinfo</span></span>](/dotnet/api/System.Management.Automation.ErrorCategoryInfo)

[<span data-ttu-id="cb819-156">"WriteError"。</span><span class="sxs-lookup"><span data-stu-id="cb819-156">System.Management.Automation.Cmdlet.WriteError</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.WriteError)

[<span data-ttu-id="cb819-157">Throwterminatingerror \* 的 \*</span><span class="sxs-lookup"><span data-stu-id="cb819-157">System.Management.Automation.Cmdlet.Throwterminatingerror\*</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError)

[<span data-ttu-id="cb819-158">向 Cmdlet 添加非终止错误报告</span><span class="sxs-lookup"><span data-stu-id="cb819-158">Adding Non-Terminating Error Reporting to Your Cmdlet</span></span>](./adding-non-terminating-error-reporting-to-your-cmdlet.md)

[<span data-ttu-id="cb819-159">Windows PowerShell 错误报告</span><span class="sxs-lookup"><span data-stu-id="cb819-159">Windows PowerShell Error Reporting</span></span>](./error-reporting-concepts.md)

[<span data-ttu-id="cb819-160">编写 Windows PowerShell Cmdlet</span><span class="sxs-lookup"><span data-stu-id="cb819-160">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
